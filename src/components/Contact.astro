---
import Toast from "../components/Toast.astro";
---
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js" is:inline></script>
<script type="text/javascript" is:inline>
   document.addEventListener('DOMContentLoaded', function () {
      emailjs.init({
        publicKey: "C_jK2QIM4s7Q8G8AR",
      });

      const SERVICE_ID = "service_5rj50jq";
      const TEMPLATE_ID = "template_e73z2jc";
      const USER_ID = "C_jK2QIM4s7Q8G8AR";

      const handleOnSubmit = (e) => {
        e.preventDefault();
        let formData = {
          name: e.target['full-name'].value,
          email: e.target['email-id'].value,
          message: e.target['message'].value,
        };
        if (
          formData.name === "" ||
          formData.email === "" ||
          formData.message === ""
        ) {
          return;
        }
        emailjs.send(SERVICE_ID, TEMPLATE_ID, formData, USER_ID).then(
          (result) => {
            console.log(result.text);
            e.target.reset();
          },
          (error) => {
            console.log(error.text);
          }
        );
      };

      document.getElementById('contactForm').addEventListener('submit', handleOnSubmit);
   });
</script>

<div class="bg-blue-300">
    <div class="heading mx-auto text-center">
        <h1 class="mx-auto my-5 text-center sm:text-4xl text-3xl font-bold">Contact Ivan</h1>
        <div class="contact-icons flex sm:flex-row flex-col items-center justify-center text-center mx-auto">
            <div class="flex flex-row my-2"><img src="https://img.icons8.com/material-rounded/96/mail.png" alt="mail icon" width="25" height="25"
                    class="ml-5 mr-2">
                ivantheinspectorshow@gmail.com </div>
        </div>
    </div>
    <div class="form-portion bg-stone-100 sm:w-[80%] w-[90%] mx-auto">
        <form id="contactForm" class="p-5 my-5">
            <div class="initials flex md:flex-row flex-col justify-evenly">
                <label for="full-name" class="text-xl md:mb-0 mb-1">Full Name : </label>
                <input type="text" name="full-name" id="" placeholder="Enter your full name"
                    class="md:w-[35%] w-1/1 px-4 py-2 md:mb-0 mb-3 rounded-xl" required>

                <label for="full-name" class="text-xl md:mb-0 mb-1">Email : </label>
                <input type="email" name="email-id" id="" placeholder="Enter your email"
                    class="md:w-[35%] w-1/1 px-4 py-2 rounded-xl" required>
            </div>
            <div class="md:p-5 p-1 sm:mt-1 mt-1">

                <div class="mt-5">
                    <label for="subject" class="text-xl">Message : </label><br>
                    <textarea name="message" required rows="5" placeholder="Write your message here"
                        class="w-[100%] px-4 py-2 rounded-xl appearance-none text-heading text-md"
                        autocomplete="off" spellcheck="false">
                    </textarea>
                </div>
            </div>
            <div class="btn mt-2 w-[100%] bg-transparent flex items-center">
                <button type="submit"
                    class="px-4 py-2 mx-auto rounded-xl text-center text-xl bg-black text-white hover:text-black hover:bg-white hover:font-bold hover:shadow-xl">Send
                    Message</button>
            </div>
        </form>
    </div>
    <!--<Toast />-->
</div>
